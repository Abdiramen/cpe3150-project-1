#include<reg932.inc>

	CSEG AT 0
		
	MOV R2, #0
	MOV P0M1, #0
	MOV P0M2, #0
	MOV P2M1, #0
	MOV P2M2, #0
MAIN:
	JB P2.0, NO_DEC

WAIT1:
	JNB P2.0, WAIT1
	DEC R2
	CJNE R2, #0FFH, LED
	;PLAY SOUND
	MOV R2, #15
	SJMP LED

NO_DEC:
	JB P0.1, MAIN

WAIT2:
	JNB P0.1, WAIT2
	INC R2
	CJNE R2, #16, LED
	;PLAY SOUND
	MOV R2, #0
	SJMP LED
	
LED:
	MOV A, R2
	CPL A
	RRC A
	MOV P0.6, C
	RRC A
	MOV P2.7, C
	RRC A
	MOV P0.5, C
	RRC A
	MOV P2.4, C
	SJMP MAIN
END