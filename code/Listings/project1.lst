A51 MACRO ASSEMBLER  PROJECT1                                                             11/05/2016 17:55:35 PAGE     1


MACRO ASSEMBLER A51 V8.2.5.0
OBJECT MODULE PLACED IN .\Objects\project1.obj
ASSEMBLER INVOKED BY: S:\C51\BIN\A51.EXE project1.a51 NOMOD51 SET(SMALL) PRINT(.\Listings\project1.lst) OBJECT(.\Objects
                      \project1.obj) EP

LOC  OBJ            LINE     SOURCE

                       1             ;#include <reg932.inc>

                +1     2     ;*******************************************************************

                +1     3     ;   P89LPC932 Special Function Registers

                +1     4     ;*******************************************************************

                +1     5     ;

                +1     6     ;******* System ****************

  00E0          +1     7     ACC         DATA        0xE0

  00F0          +1     8     B           DATA        0xF0

  0081          +1     9     SP          DATA        0x81

  0082          +1    10     DPL         DATA        0x82

  0083          +1    11     DPH         DATA        0x83

  00DF          +1    12     RSTSRC  DATA    0xDF

  0087          +1    13     PCON    DATA    0x87

  00B5          +1    14     PCONA   DATA    0xB5

  00D0          +1    15     PSW         DATA        0xD0

  0095          +1    16     DIVM    DATA    0x95

  0096          +1    17     TRIM    DATA    0x96

  00A2          +1    18     AUXR1   DATA    0xA2

                +1    19     ;------- Bit Addressable -------

  00D7          +1    20     CY          BIT     0xD7

  00D6          +1    21     AC          BIT     0xD6

  00D5          +1    22     F0          BIT     0xD5

  00D4          +1    23     RS1         BIT     0xD4

  00D3          +1    24     RS0         BIT     0xD3

  00D2          +1    25     OV          BIT     0xD2

  00D1          +1    26     F1          BIT     0xD1

  00D0          +1    27     P           BIT     0xD0

  00B1          +1    28     XTAL1   BIT         0xB1

  00B0          +1    29     XTAL2   BIT         0xB0

                +1    30     ;******* Ports *****************

  0080          +1    31     P0          DATA        0x80

  0084          +1    32     P0M1    DATA    0x84

  0085          +1    33     P0M2    DATA    0x85

  00F6          +1    34     PT0AD   DATA    0xF6

  0090          +1    35     P1          DATA        0x90

  0091          +1    36     P1M1    DATA    0x91

  0092          +1    37     P1M2    DATA    0x92

  00A0          +1    38     P2          DATA        0xA0

  00A4          +1    39     P2M1    DATA    0xA4

  00A5          +1    40     P2M2    DATA    0xA5

  00B0          +1    41     P3          DATA        0xB0

  00B1          +1    42     P3M1    DATA    0xB1

  00B2          +1    43     P3M2    DATA    0xB2

                +1    44     ;******* EEPROM ****************

  00F1          +1    45     DEECON  DATA    0xF1

  00F2          +1    46     DEEDAT  DATA    0xF2

  00F3          +1    47     DEEADR  DATA    0xF3

                +1    48     ;******* Keypad ****************

  0086          +1    49     KBMASK  DATA    0x86

  0093          +1    50     KBPATN  DATA    0x93

  0094          +1    51     KBCON   DATA    0x94

                +1    52     ;------- Bit Addressable -------

  0080          +1    53     KB0         BIT     0x80

  0081          +1    54     KB1         BIT     0x81

  0082          +1    55     KB2         BIT     0x82

  0083          +1    56     KB3         BIT     0x83

  0084          +1    57     KB4         BIT     0x84

A51 MACRO ASSEMBLER  PROJECT1                                                             11/05/2016 17:55:35 PAGE     2

  0085          +1    58     KB5         BIT     0x85

  0086          +1    59     KB6         BIT     0x86

  0087          +1    60     KB7         BIT     0x87

                +1    61     ;******* Comparators ***********

  00AC          +1    62     CMP1    DATA    0xAC

  00AD          +1    63     CMP2    DATA    0xAD

                +1    64     ;------- Bit Addressable -------

  0086          +1    65     CMP1O   BIT     0x86

  0085          +1    66     CMPREF  BIT     0x85

  0084          +1    67     CIN1A   BIT     0x84

  0083          +1    68     CIN1B   BIT     0x83

  0082          +1    69     CIN2A   BIT     0x82

  0081          +1    70     CIN2B   BIT     0x81

  0080          +1    71     CMP2O   BIT     0x80

                +1    72     ;******* Serial Port ***********

  0098          +1    73     SCON    DATA    0x98

  0099          +1    74     SBUF    DATA    0x99

  00A9          +1    75     SADDR   DATA    0xA9

  00B9          +1    76     SADEN   DATA    0xB9

  00BA          +1    77     SSTAT   DATA    0xBA

  00BD          +1    78     BRGCON  DATA    0xBD

  00BE          +1    79     BRGR0   DATA    0xBE

  00BF          +1    80     BRGR1   DATA    0xBF

                +1    81     ;------- Bit Addressable -------

  009F          +1    82     FE          BIT     0x9F

  009F          +1    83     SM0         BIT     0x9F

  009E          +1    84     SM1         BIT     0x9E

  009D          +1    85     SM2         BIT     0x9D

  009C          +1    86     REN         BIT     0x9C

  009B          +1    87     TB8         BIT     0x9B

  009A          +1    88     RB8         BIT     0x9A

  0099          +1    89     TI          BIT     0x99

  0098          +1    90     RI          BIT     0x98

  0091          +1    91     RxD         BIT     0x91

  0090          +1    92     TxD         BIT     0x90

                +1    93     ;******* SPI *******************

  00E1          +1    94     SPSTAT  DATA    0xE1

  00E2          +1    95     SPCTL   DATA    0xE2

  00E3          +1    96     SPDAT   DATA    0xE3

                +1    97     ;------- Bit Addressable -------

  00A5          +1    98     SPICLK  BIT         0xA5

  00A4          +1    99     SS          BIT     0xA4

  00A3          +1   100     MISO    BIT         0xA3

  00A2          +1   101     MOSI    BIT         0xA2

                +1   102     ;******* IIC *******************

  00D8          +1   103     I2CON   DATA    0xD8

  00D9          +1   104     I2STAT  DATA    0xD9

  00DA          +1   105     I2DAT   DATA    0xDA

  00DB          +1   106     I2ADR   DATA    0xDB

  00DC          +1   107     I2SCLL  DATA    0xDC

  00DD          +1   108     I2SCLH  DATA    0xDD

                +1   109     ;------ Bit Addressable --------

  00DE          +1   110     I2EN    BIT         0xDE

  00DD          +1   111     STA         BIT     0xDD

  00DC          +1   112     STO         BIT     0xDC

  00DB          +1   113     SI          BIT     0xDB

  00DA          +1   114     AA          BIT     0xDA

  00D8          +1   115     CRSEL   BIT         0xD8

  0093          +1   116     SDA         BIT     0x93

  0092          +1   117     SCL         BIT     0x92

                +1   118     ;******* Timers ****************

  00CA          +1   119     TPCR2L  DATA    0xCA

  00CB          +1   120     TPCR2H  DATA    0xCB

  0088          +1   121     TCON    DATA    0x88

  0089          +1   122     TMOD    DATA    0x89

  008A          +1   123     TL0         DATA        0x8A

A51 MACRO ASSEMBLER  PROJECT1                                                             11/05/2016 17:55:35 PAGE     3

  008C          +1   124     TH0         DATA        0x8C

  008B          +1   125     TL1         DATA        0x8B

  008D          +1   126     TH1         DATA        0x8D

  00CC          +1   127     TL2         DATA        0xCC

  00CD          +1   128     TH2         DATA        0xCD

  008F          +1   129     TAMOD   DATA    0x8F

                +1   130     ;------- Bit Addressable -------

  008F          +1   131     TF1         BIT     0x8F

  008E          +1   132     TR1         BIT     0x8E

  008D          +1   133     TF0         BIT     0x8D

  008C          +1   134     TR0         BIT     0x8C

  008B          +1   135     IE1         BIT     0x8B

  008A          +1   136     IT1         BIT     0x8A

  0089          +1   137     IE0         BIT     0x89

  0088          +1   138     IT0         BIT     0x88

  00CF          +1   139     PLLEN   BIT         0xCF

  00CE          +1   140     HLTRN   BIT         0xCE

  00CD          +1   141     HLTEN   BIT         0xCD

  00CC          +1   142     ALTCD   BIT         0xCC

  00CB          +1   143     ALTAB   BIT         0xCB

  00CA          +1   144     TDIR2   BIT         0xCA

  00C9          +1   145     TMOD21  BIT         0xC9

  00C8          +1   146     TMOD20  BIT         0xC8

  0087          +1   147     T1          BIT     0x87

  0092          +1   148     T0          BIT     0x92

                +1   149     ;******* Capture/Compare Unit **

  00EA          +1   150     CCCRA   DATA    0xEA

  00EB          +1   151     CCCRB   DATA    0xEB

  00EC          +1   152     CCCRC   DATA    0xEC

  00ED          +1   153     CCCRD   DATA    0xED

  00C8          +1   154     TCR20   DATA    0xC8

  00F9          +1   155     TCR21   DATA    0xF9

  00C9          +1   156     TICR2   DATA    0xC9

  00DE          +1   157     TISE2   DATA    0xDE

  00E9          +1   158     TIFR2   DATA    0xE9

  00CE          +1   159     TOR2L   DATA    0xCE

  00CF          +1   160     TOR2H   DATA    0xCF

                +1   161     ;******* Input Capture *********

  00AA          +1   162     ICRAL   DATA    0xAA

  00AB          +1   163     ICRAH   DATA    0xAB

  00AE          +1   164     ICRBL   DATA    0xAE

  00AF          +1   165     ICRBH   DATA    0xAF

                +1   166     ;------- Bit Addressable -------

  00A7          +1   167     ICA         BIT     0xA7

  00A0          +1   168     ICB         BIT     0xA0

                +1   169     ;******* Output Compare ********

  00EE          +1   170     OCRAL   DATA    0xEE

  00EF          +1   171     OCRAH   DATA    0xEF

  00FA          +1   172     OCRBL   DATA    0xFA

  00FB          +1   173     OCRBH   DATA    0xFB

  00FC          +1   174     OCRCL   DATA    0xFC

  00FD          +1   175     OCRCH   DATA    0xFD

  00FE          +1   176     OCRDL   DATA    0xFE

  00FF          +1   177     OCRDH   DATA    0xFF

                +1   178     ;------- Bit Addressable -------

  00A1          +1   179     OCD         BIT     0xA1

  0097          +1   180     OCC         BIT     0x97

  0096          +1   181     OCB         BIT     0x96

  00A6          +1   182     OCA         BIT     0xA6

                +1   183     ;******* Watchdog **************

  00C2          +1   184     WFEED1  DATA    0xC2

  00C3          +1   185     WFEED2  DATA    0xC3

  00C1          +1   186     WDL         DATA        0xC1

  00A7          +1   187     WDCON   DATA    0xA7

                +1   188     ;******* Real Time Clock *******

  00D3          +1   189     RTCL    DATA    0xD3

A51 MACRO ASSEMBLER  PROJECT1                                                             11/05/2016 17:55:35 PAGE     4

  00D2          +1   190     RTCH    DATA    0xD2

  00D1          +1   191     RTCCON  DATA    0xD1

                +1   192     ;******* Interrupts ************

  00A8          +1   193     IEN0    DATA    0xA8

  00E8          +1   194     IEN1    DATA    0xE8

  00B8          +1   195     IP0         DATA        0xB8

  00B7          +1   196     IP0H    DATA    0xB7

  00F8          +1   197     IP1         DATA        0xF8

  00F7          +1   198     IP1H    DATA    0xF7

                +1   199     ;------- Bit Addressable -------

  00AF          +1   200     EA          BIT     0xAF

  00AE          +1   201     EWDRT   BIT         0xAE

  00AD          +1   202     EBO         BIT     0xAD

  00AC          +1   203     ES          BIT     0xAC

  00AC          +1   204     ESR         BIT     0xAC

  00AB          +1   205     ET1         BIT     0xAB

  00AA          +1   206     EX1         BIT     0xAA

  00A9          +1   207     ET0         BIT     0xA9

  00A8          +1   208     EX0         BIT     0xA8

  00EF          +1   209     EIEE    BIT         0xEF

  00EE          +1   210     EST         BIT     0xEE

  00EC          +1   211     ECCU    BIT         0xEC

  00EB          +1   212     ESPI    BIT         0xEB

  00EA          +1   213     EC          BIT     0xEA

  00E9          +1   214     EKBI    BIT         0xE9

  00E8          +1   215     EI2C    BIT         0xE8

  00BE          +1   216     PWDRT   BIT         0xBE

  00BD          +1   217     PB0         BIT     0xBD

  00BC          +1   218     PS          BIT     0xBC

  00BC          +1   219     PSR         BIT     0xBC

  00BB          +1   220     PT1         BIT     0xBB

  00BA          +1   221     PX1         BIT     0xBA

  00B9          +1   222     PT0         BIT     0xB9

  00B8          +1   223     PX0         BIT     0xB8

  00FF          +1   224     PIEE    BIT         0xFF

  00FE          +1   225     PST         BIT     0xFE

  00FC          +1   226     PCCU    BIT         0xFC

  00FB          +1   227     PSPI    BIT         0xFB

  00FA          +1   228     PCL     BIT         0xFA

  00F9          +1   229     PKBI    BIT         0xF9

  00F8          +1   230     PI2C    BIT         0xF8

  0095          +1   231     RST         BIT     0x95

  0094          +1   232     INT1    BIT         0x94

  0093          +1   233     INT0    BIT         0x93

                +1   234     

                +1   235     

                +1   236     

                +1   237     

                +1   238     

                +1   239     

                +1   240     

                +1   241     

                +1   242     

                +1   243     

                +1   244     

                +1   245     

                +1   246     

                +1   247     

                +1   248     

                     249     

                     250             

  0020               251             RANDREG EQU 0X20

                     252                     

----                 253             CSEG AT 0

                     254     

0000 7A00            255             MOV R2, #0

A51 MACRO ASSEMBLER  PROJECT1                                                             11/05/2016 17:55:35 PAGE     5

0002 75B100          256             MOV P3M1, #00H

0005 75B200          257         MOV P3M2, #00H

0008 75A400          258         MOV P2M1, #00H

000B 75A500          259         MOV P2M2, #00H

000E 759100          260         MOV P1M1, #00H

0011 759200          261         MOV P1M2, #00H

0014 758400          262         MOV P0M1, #00H

0017 758500          263         MOV P0M2, #00H

                     264             

001A 752007          265             MOV RANDREG, #7D

001D                 266     HERE:

001D 1164            267             ACALL RNG

001F F8              268             MOV R0, A

0020 80FB            269             SJMP HERE

                     270     

0022                 271     MAIN:

0022 20A00D          272             JB P2.0, NO_DEC

                     273     

0025                 274     WAIT1:

0025 30A0FD          275             JNB P2.0, WAIT1

0028 1A              276             DEC R2

0029 BAFF16          277             CJNE R2, #0FFH, LED

002C 1152            278             ACALL BEEP 

002E 7A0F            279             MOV R2, #15

0030 8010            280             SJMP LED

                     281     

0032                 282     NO_DEC:

0032 2081ED          283             JB P0.1, MAIN

                     284     

0035                 285     WAIT2:

0035 3081FD          286             JNB P0.1, WAIT2

0038 0A              287             INC R2

0039 BA1006          288             CJNE R2, #16, LED

003C 1152            289             ACALL BEEP

003E 7A00            290             MOV R2, #0

0040 8000            291             SJMP LED

                     292             

0042                 293     LED:

0042 EA              294             MOV A, R2

0043 F4              295             CPL A

0044 13              296             RRC A

0045 9286            297             MOV P0.6, C

0047 13              298             RRC A

0048 92A7            299             MOV P2.7, C

004A 13              300             RRC A

004B 9285            301             MOV P0.5, C

004D 13              302             RRC A

004E 92A4            303             MOV P2.4, C

0050 80D0            304             SJMP MAIN

                     305             

                     306             

                     307     ; this mostly came from trial and error

                     308     ; and seeing what sounded good for a beep

                     309     ; reference canvas tutorial for this

0052                 310     BEEP: 

0052 7864            311             MOV R0, #100

0054 B297            312     S1:     CPL P1.7

0056 115B            313             ACALL SDELAY

0058 D8FA            314             DJNZ R0, S1

                     315             

005A 22              316             RET

                     317             

005B                 318     SDELAY: 

005B 7964            319             MOV R1, #100

005D 7A0A            320     D1: MOV R2, #10

005F DAFE            321     D2: DJNZ R2, D2

A51 MACRO ASSEMBLER  PROJECT1                                                             11/05/2016 17:55:35 PAGE     6

0061 D9FA            322             DJNZ R1, D1

0063 22              323             RET

                     324     

                     325     

                     326     ; note this a port from http://pjrc.com/tech/8051/rand.asm

                     327     ; returns a random value in the A  register from 0 to 9, inclusive.

                     328     ; note needs a seed value (equated at the top)

0064                 329     RNG:

0064 E520            330             MOV     A, RANDREG

0066 7003            331             JNZ     RAND8B

0068 F4              332             CPL     A

0069 F520            333             MOV     RANDREG, A

006B 54B8            334     RAND8B: ANL     A, #10111000B

006D A2D0            335             MOV     C, PSW.0

006F E520            336             MOV     A, RANDREG

0071 33              337             RLC     A

0072 F520            338             MOV     RANDREG, A

0074 75F00A          339             MOV B, #10D

0077 84              340             DIV AB

0078 E5F0            341             MOV A, B

                     342     

007A 22              343             RET

                     344     

                     345     ; enables a row of lights with a delay of ~75 ms 

                     346     ; read documenation how this works, but for now a quick summary..

                     347     ; mov into A bit-string for the first 8 lights

                     348     ; move into c for the ninth light

                     349     ; i.e. A = 10101010 C = 1

                     350     ; enables a huge X of lights

007B                 351     LIGHTS:

007B F4              352             CPL A

007C B3              353             CPL C

                     354             

007D 33              355             RLC A

007E 92A4            356             MOV P2.4, C

                     357             

0080 33              358             RLC A

0081 9285            359             MOV P0.5, C

                     360             

0083 33              361             RLC A

0084 92A7            362             MOV P2.7, C

                     363             

0086 33              364             RLC A

0087 9286            365             MOV P0.6, C

                     366             

0089 33              367             RLC A

008A 9296            368             MOV P1.6, C

                     369             

008C 33              370             RLC A

008D 9284            371             MOV P0.4, C

                     372             

008F 33              373             RLC A

0090 92A5            374             MOV P2.5, C

                     375             

0092 33              376             RLC A

0093 9287            377             MOV P0.7, C

                     378             

0095 33              379             RLC A

0096 92A6            380             MOV P2.6, C

                     381             

0098 7400            382             MOV A, #00D

009A 75F000          383             MOV B, #00D

009D 11B2            384             ACALL EDELAY

                     385             

009F 22              386             RET

                     387             

A51 MACRO ASSEMBLER  PROJECT1                                                             11/05/2016 17:55:35 PAGE     7

                     388     ; envokes a timer delay

                     389     ; A = high, B = 0

                     390     ; use formula from class to determine dla

00A0                 391     DELAY:

00A0 758901          392             MOV TMOD, #01D

00A3 85F08A          393             MOV TL0, B

00A6 F58C            394             MOV TH0, A

                     395             

00A8 D28C            396             SETB TR0

                     397             

00AA                 398     DLLOOP:

00AA 308DFD          399             JNB TF0, DLLOOP

                     400             

00AD C28C            401             CLR TR0

00AF C28D            402             CLR TF0

                     403             

00B1 22              404             RET

                     405     

                     406     ; Extended delay, uses timers on the 8051

                     407     ; A = high of the timer, B = low of the timer

                     408     ; And R7 is the multiple of iterations

                     409     ; it's basically DELAY * SOME CONSTANT

00B2                 410     EDELAY:

00B2                 411     EDLOOP:

00B2 11A0            412             ACALL DELAY

00B4 DFFC            413             DJNZ R7, EDLOOP

00B6 22              414             RET

                     415     

                     416     ; USES REGISTERS A, B, R6, R7

                     417     ; light sequence for the next level

00B7                 418     NEXTLEVEL:

00B7 7E02            419             MOV R6, #2D

00B9                 420     LLOOP:

00B9 74AA            421             MOV A, #10101010B

00BB D3              422             SETB C

00BC 7F14            423             MOV R7, #20D

00BE 117B            424             ACALL LIGHTS

                     425             

00C0 74AA            426             MOV A, #10101010B

00C2 F4              427             CPL A

00C3 C3              428             CLR C

00C4 7F14            429             MOV R7, #20D

00C6 117B            430             ACALL LIGHTS

                     431             

00C8 DEEF            432             DJNZ R6, LLOOP

                     433             

00CA 7400            434             MOV A, #0D

00CC C3              435             CLR C

00CD 117B            436             ACALL LIGHTS

                     437             

00CF 22              438             RET

                     439     

                     440     ; USES REGISTERS R6, R7, A, B

                     441     ; light sequence for the losing state

                     442     ; bright flash of lights twice

00D0                 443     LOST:

00D0 7E02            444             MOV R6, #2D

                     445     

00D2                 446     LOLOOP:

00D2 74FF            447             MOV A, #0FFH

00D4 D3              448             SETB C

00D5 7F14            449             MOV R7, #20D

00D7 117B            450             ACALL LIGHTS

                     451             

00D9 E4              452             CLR A 

00DA C3              453             CLR C

A51 MACRO ASSEMBLER  PROJECT1                                                             11/05/2016 17:55:35 PAGE     8

00DB 7F14            454             MOV R7, #20D

00DD 117B            455             ACALL LIGHTS

                     456     

00DF DEF1            457             DJNZ R6, LOLOOP

                     458             

00E1 22              459             RET

                     460     

                     461     ; USES REGISTERS R6, R7, A, B

                     462     ; light sequence for the winning state

00E2                 463     WINNER:

                     464             

00E2 7E03            465             MOV R6, #3D

                     466             

00E4 7400            467             MOV A, #00000000B

00E6 C3              468         CLR C

00E7 AF06            469             MOV R7, 6

00E9 117B            470             ACALL LIGHTS

                     471             

00EB 7480            472         MOV A, #10000000B

00ED C3              473         CLR C

00EE AF06            474             MOV R7, 6

00F0 117B            475             ACALL LIGHTS

                     476             

00F2 74C0            477         MOV A, #11000000B

00F4 C3              478         CLR C

00F5 AF06            479             MOV R7, 6

00F7 117B            480             ACALL LIGHTS

                     481             

00F9 74E0            482         MOV A, #11100000B

00FB C3              483         CLR C

00FC AF06            484             MOV R7, 6

00FE 117B            485             ACALL LIGHTS

                     486             

0100 74E4            487         MOV A, #11100100B

0102 C3              488         CLR C

0103 AF06            489             MOV R7, 6

0105 117B            490             ACALL LIGHTS

                     491             

0107 74E4            492         MOV A, #11100100B

0109 D3              493         SETB C

010A AF06            494             MOV R7, 6

010C 117B            495             ACALL LIGHTS

                     496             

010E 74E5            497         MOV A, #11100101B

0110 D3              498         SETB C

0111 AF06            499             MOV R7, 6

0113 117B            500             ACALL LIGHTS

                     501             

0115 74E7            502         MOV A, #11100111B

0117 D3              503         SETB C

0118 AF06            504             MOV R7, 6

011A 117B            505             ACALL LIGHTS

                     506     

011C 74F7            507         MOV A, #11110111B

011E D3              508         SETB C

011F AF06            509             MOV R7, 6

0121 117B            510             ACALL LIGHTS

                     511             

0123 74FF            512         MOV A, #11111111B

0125 D3              513         SETB C

0126 AF06            514             MOV R7, 6

0128 117B            515             ACALL LIGHTS

                     516             

                     517             

                     518     

012A 7400            519             MOV A, #00000000B

A51 MACRO ASSEMBLER  PROJECT1                                                             11/05/2016 17:55:35 PAGE     9

012C C3              520             CLR C

012D AF06            521             MOV R7, 6

012F F4              522             CPL A

0130 B3              523             CPL C

0131 117B            524             ACALL LIGHTS

                     525     

0133 7480            526             MOV A, #10000000B

0135 C3              527             CLR C

0136 AF06            528             MOV R7, 6

0138 F4              529             CPL A

0139 B3              530             CPL C

013A 117B            531             ACALL LIGHTS

                     532     

013C 74C0            533             MOV A, #11000000B

013E C3              534             CLR C

013F AF06            535             MOV R7, 6

0141 F4              536             CPL A

0142 B3              537             CPL C

0143 117B            538             ACALL LIGHTS

                     539     

0145 74E0            540             MOV A, #11100000B

0147 C3              541             CLR C

0148 AF06            542             MOV R7, 6

014A F4              543             CPL A

014B B3              544             CPL C

014C 117B            545             ACALL LIGHTS

                     546     

014E 74E4            547             MOV A, #11100100B

0150 C3              548             CLR C

0151 AF06            549             MOV R7, 6

0153 F4              550             CPL A

0154 B3              551             CPL C

0155 117B            552             ACALL LIGHTS

                     553     

0157 74E4            554             MOV A, #11100100B

0159 D3              555             SETB C

015A AF06            556             MOV R7, 6

015C F4              557             CPL A

015D B3              558             CPL C

015E 117B            559             ACALL LIGHTS

                     560     

0160 74E5            561             MOV A, #11100101B

0162 D3              562             SETB C

0163 AF06            563             MOV R7, 6

0165 F4              564             CPL A

0166 B3              565             CPL C

0167 117B            566             ACALL LIGHTS

                     567     

0169 74E7            568             MOV A, #11100111B

016B D3              569             SETB C

016C AF06            570             MOV R7, 6

016E F4              571             CPL A

016F B3              572             CPL C

0170 117B            573             ACALL LIGHTS

                     574     

0172 74F7            575             MOV A, #11110111B

0174 D3              576             SETB C

0175 AF06            577             MOV R7, 6

0177 F4              578             CPL A

0178 B3              579             CPL C

0179 117B            580             ACALL LIGHTS

                     581     

017B 74FF            582             MOV A, #11111111B

017D D3              583             SETB C

017E AF06            584             MOV R7, 6

0180 F4              585             CPL A

A51 MACRO ASSEMBLER  PROJECT1                                                             11/05/2016 17:55:35 PAGE    10

0181 B3              586             CPL C

0182 117B            587             ACALL LIGHTS

                     588             

                     589             

0184 7E08            590             MOV R6, #8D

0186 7D05            591             MOV R5, #5D

0188                 592     L1:

0188 74AA            593             MOV A, #10101010B

018A D3              594             SETB C

018B AF06            595             MOV R7, 6

018D 117B            596             ACALL LIGHTS

                     597             

018F 745D            598             MOV A, #01011101B

0191 C3              599             CLR C

0192 AF06            600             MOV R7, 6

0194 117B            601             ACALL LIGHTS

                     602             

0196 DDF0            603             DJNZ R5, L1

                     604             

                     605             

0198 7E08            606             MOV R6, #8D

019A 7D07            607             MOV R5, #7D

019C                 608     L2:

019C 74F7            609             MOV A, #11110111B

019E D3              610             SETB C

019F AF06            611             MOV R7, 6

01A1 117B            612             ACALL LIGHTS

                     613             

01A3 7408            614             MOV A, #00001000B

01A5 C3              615             CLR C

01A6 AF06            616             MOV R7, 6

01A8 117B            617             ACALL LIGHTS

01AA DDF0            618             DJNZ R5, L2

                     619             

                     620             

01AC 74F7            621             MOV A, #11110111B

01AE D3              622             SETB C

01AF AF06            623             MOV R7, 6

01B1 117B            624             ACALL LIGHTS

                     625             

                     626             

01B3 7E06            627             MOV R6, #6D

01B5 7D07            628             MOV R5, #7D

                     629             

01B7                 630     L3:

01B7 7488            631             MOV A, #10001000B

01B9 D3              632             SETB C

01BA AF06            633             MOV R7, 6

01BC 117B            634             ACALL LIGHTS

                     635             

01BE 7449            636             MOV A, #01001001B

01C0 C3              637             CLR C

01C1 AF06            638             MOV R7, 6

01C3 117B            639             ACALL LIGHTS

                     640             

01C5 742A            641             MOV A, #00101010B

01C7 C3              642             CLR C

01C8 AF06            643             MOV R7, 6

01CA 117B            644             ACALL LIGHTS

                     645             

01CC 741C            646             MOV A, #00011100B

01CE C3              647             CLR C

01CF AF06            648             MOV R7, 6

01D1 117B            649             ACALL LIGHTS

                     650             

01D3 DDE2            651             DJNZ R5, L3

A51 MACRO ASSEMBLER  PROJECT1                                                             11/05/2016 17:55:35 PAGE    11

                     652             

                     653             

01D5 7488            654             MOV A, #10001000B

01D7 D3              655             SETB C

01D8 AF06            656             MOV R7, 6

01DA 117B            657             ACALL LIGHTS

                     658             

                     659                     

01DC 7E06            660             MOV R6, #6D

01DE 7D03            661             MOV R5, #3D

                     662             

01E0                 663     L4:

01E0 7480            664             MOV A, #10000000B

01E2 C3              665             CLR C

01E3 AF06            666             MOV R7, 6

01E5 117B            667             ACALL LIGHTS

                     668             

                     669             

01E7 74D0            670             MOV A, #11010000B

01E9 C3              671             CLR C

01EA AF06            672             MOV R7, 6

01EC 117B            673             ACALL LIGHTS

                     674             

                     675             

01EE 74FA            676             MOV A, #11111010B

01F0 C3              677             CLR C

01F1 AF06            678             MOV R7, 6

01F3 117B            679             ACALL LIGHTS

                     680             

                     681             

01F5 74FF            682             MOV A, #11111111B

01F7 C3              683             CLR C

01F8 AF06            684             MOV R7, 6

01FA 117B            685             ACALL LIGHTS

                     686             

                     687             

01FC 74FF            688             MOV A, #11111111B

01FE D3              689             SETB C

01FF AF06            690             MOV R7, 6

0201 117B            691             ACALL LIGHTS

                     692             

                     693             ; role reversal 

                     694             

0203 7480            695             MOV A, #10000000B

0205 C3              696             CLR C

0206 F4              697             CPL A

0207 B3              698             CPL C

0208 AF06            699             MOV R7, 6

020A 117B            700             ACALL LIGHTS

                     701             

                     702             

020C 74D0            703             MOV A, #11010000B

020E C3              704             CLR C

020F F4              705             CPL A

0210 B3              706             CPL C

0211 AF06            707             MOV R7, 6

0213 117B            708             ACALL LIGHTS

                     709             

                     710             

0215 74FA            711             MOV A, #11111010B

0217 C3              712             CLR C

0218 F4              713             CPL A

0219 B3              714             CPL C

021A AF06            715             MOV R7, 6

021C 117B            716             ACALL LIGHTS

                     717             

A51 MACRO ASSEMBLER  PROJECT1                                                             11/05/2016 17:55:35 PAGE    12

                     718             

021E 74FF            719             MOV A, #11111111B

0220 C3              720             CLR C

0221 F4              721             CPL A

0222 B3              722             CPL C

0223 AF06            723             MOV R7, 6

0225 117B            724             ACALL LIGHTS

                     725             

                     726             

0227 74FF            727             MOV A, #11111111B

0229 D3              728             SETB C

022A F4              729             CPL A

022B B3              730             CPL C

022C AF06            731             MOV R7, 6

022E 117B            732             ACALL LIGHTS

                     733             

0230 DDAE            734             DJNZ R5, L4

                     735             

                     736             

0232 22              737             RET

                     738             END

A51 MACRO ASSEMBLER  PROJECT1                                                             11/05/2016 17:55:35 PAGE    13

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

AA . . . . . . . .  B ADDR   00D8H.2 A   
AC . . . . . . . .  B ADDR   00D0H.6 A   
ACC. . . . . . . .  D ADDR   00E0H   A   
ALTAB. . . . . . .  B ADDR   00C8H.3 A   
ALTCD. . . . . . .  B ADDR   00C8H.4 A   
AUXR1. . . . . . .  D ADDR   00A2H   A   
B. . . . . . . . .  D ADDR   00F0H   A   
BEEP . . . . . . .  C ADDR   0052H   A   
BRGCON . . . . . .  D ADDR   00BDH   A   
BRGR0. . . . . . .  D ADDR   00BEH   A   
BRGR1. . . . . . .  D ADDR   00BFH   A   
CCCRA. . . . . . .  D ADDR   00EAH   A   
CCCRB. . . . . . .  D ADDR   00EBH   A   
CCCRC. . . . . . .  D ADDR   00ECH   A   
CCCRD. . . . . . .  D ADDR   00EDH   A   
CIN1A. . . . . . .  B ADDR   0080H.4 A   
CIN1B. . . . . . .  B ADDR   0080H.3 A   
CIN2A. . . . . . .  B ADDR   0080H.2 A   
CIN2B. . . . . . .  B ADDR   0080H.1 A   
CMP1 . . . . . . .  D ADDR   00ACH   A   
CMP1O. . . . . . .  B ADDR   0080H.6 A   
CMP2 . . . . . . .  D ADDR   00ADH   A   
CMP2O. . . . . . .  B ADDR   0080H.0 A   
CMPREF . . . . . .  B ADDR   0080H.5 A   
CRSEL. . . . . . .  B ADDR   00D8H.0 A   
CY . . . . . . . .  B ADDR   00D0H.7 A   
D1 . . . . . . . .  C ADDR   005DH   A   
D2 . . . . . . . .  C ADDR   005FH   A   
DEEADR . . . . . .  D ADDR   00F3H   A   
DEECON . . . . . .  D ADDR   00F1H   A   
DEEDAT . . . . . .  D ADDR   00F2H   A   
DELAY. . . . . . .  C ADDR   00A0H   A   
DIVM . . . . . . .  D ADDR   0095H   A   
DLLOOP . . . . . .  C ADDR   00AAH   A   
DPH. . . . . . . .  D ADDR   0083H   A   
DPL. . . . . . . .  D ADDR   0082H   A   
EA . . . . . . . .  B ADDR   00A8H.7 A   
EBO. . . . . . . .  B ADDR   00A8H.5 A   
EC . . . . . . . .  B ADDR   00E8H.2 A   
ECCU . . . . . . .  B ADDR   00E8H.4 A   
EDELAY . . . . . .  C ADDR   00B2H   A   
EDLOOP . . . . . .  C ADDR   00B2H   A   
EI2C . . . . . . .  B ADDR   00E8H.0 A   
EIEE . . . . . . .  B ADDR   00E8H.7 A   
EKBI . . . . . . .  B ADDR   00E8H.1 A   
ES . . . . . . . .  B ADDR   00A8H.4 A   
ESPI . . . . . . .  B ADDR   00E8H.3 A   
ESR. . . . . . . .  B ADDR   00A8H.4 A   
EST. . . . . . . .  B ADDR   00E8H.6 A   
ET0. . . . . . . .  B ADDR   00A8H.1 A   
ET1. . . . . . . .  B ADDR   00A8H.3 A   
EWDRT. . . . . . .  B ADDR   00A8H.6 A   
EX0. . . . . . . .  B ADDR   00A8H.0 A   
EX1. . . . . . . .  B ADDR   00A8H.2 A   
F0 . . . . . . . .  B ADDR   00D0H.5 A   
F1 . . . . . . . .  B ADDR   00D0H.1 A   
FE . . . . . . . .  B ADDR   0098H.7 A   
HERE . . . . . . .  C ADDR   001DH   A   
HLTEN. . . . . . .  B ADDR   00C8H.5 A   
HLTRN. . . . . . .  B ADDR   00C8H.6 A   
A51 MACRO ASSEMBLER  PROJECT1                                                             11/05/2016 17:55:35 PAGE    14

I2ADR. . . . . . .  D ADDR   00DBH   A   
I2CON. . . . . . .  D ADDR   00D8H   A   
I2DAT. . . . . . .  D ADDR   00DAH   A   
I2EN . . . . . . .  B ADDR   00D8H.6 A   
I2SCLH . . . . . .  D ADDR   00DDH   A   
I2SCLL . . . . . .  D ADDR   00DCH   A   
I2STAT . . . . . .  D ADDR   00D9H   A   
ICA. . . . . . . .  B ADDR   00A0H.7 A   
ICB. . . . . . . .  B ADDR   00A0H.0 A   
ICRAH. . . . . . .  D ADDR   00ABH   A   
ICRAL. . . . . . .  D ADDR   00AAH   A   
ICRBH. . . . . . .  D ADDR   00AFH   A   
ICRBL. . . . . . .  D ADDR   00AEH   A   
IE0. . . . . . . .  B ADDR   0088H.1 A   
IE1. . . . . . . .  B ADDR   0088H.3 A   
IEN0 . . . . . . .  D ADDR   00A8H   A   
IEN1 . . . . . . .  D ADDR   00E8H   A   
INT0 . . . . . . .  B ADDR   0090H.3 A   
INT1 . . . . . . .  B ADDR   0090H.4 A   
IP0. . . . . . . .  D ADDR   00B8H   A   
IP0H . . . . . . .  D ADDR   00B7H   A   
IP1. . . . . . . .  D ADDR   00F8H   A   
IP1H . . . . . . .  D ADDR   00F7H   A   
IT0. . . . . . . .  B ADDR   0088H.0 A   
IT1. . . . . . . .  B ADDR   0088H.2 A   
KB0. . . . . . . .  B ADDR   0080H.0 A   
KB1. . . . . . . .  B ADDR   0080H.1 A   
KB2. . . . . . . .  B ADDR   0080H.2 A   
KB3. . . . . . . .  B ADDR   0080H.3 A   
KB4. . . . . . . .  B ADDR   0080H.4 A   
KB5. . . . . . . .  B ADDR   0080H.5 A   
KB6. . . . . . . .  B ADDR   0080H.6 A   
KB7. . . . . . . .  B ADDR   0080H.7 A   
KBCON. . . . . . .  D ADDR   0094H   A   
KBMASK . . . . . .  D ADDR   0086H   A   
KBPATN . . . . . .  D ADDR   0093H   A   
L1 . . . . . . . .  C ADDR   0188H   A   
L2 . . . . . . . .  C ADDR   019CH   A   
L3 . . . . . . . .  C ADDR   01B7H   A   
L4 . . . . . . . .  C ADDR   01E0H   A   
LED. . . . . . . .  C ADDR   0042H   A   
LIGHTS . . . . . .  C ADDR   007BH   A   
LLOOP. . . . . . .  C ADDR   00B9H   A   
LOLOOP . . . . . .  C ADDR   00D2H   A   
LOST . . . . . . .  C ADDR   00D0H   A   
MAIN . . . . . . .  C ADDR   0022H   A   
MISO . . . . . . .  B ADDR   00A0H.3 A   
MOSI . . . . . . .  B ADDR   00A0H.2 A   
NEXTLEVEL. . . . .  C ADDR   00B7H   A   
NO_DEC . . . . . .  C ADDR   0032H   A   
OCA. . . . . . . .  B ADDR   00A0H.6 A   
OCB. . . . . . . .  B ADDR   0090H.6 A   
OCC. . . . . . . .  B ADDR   0090H.7 A   
OCD. . . . . . . .  B ADDR   00A0H.1 A   
OCRAH. . . . . . .  D ADDR   00EFH   A   
OCRAL. . . . . . .  D ADDR   00EEH   A   
OCRBH. . . . . . .  D ADDR   00FBH   A   
OCRBL. . . . . . .  D ADDR   00FAH   A   
OCRCH. . . . . . .  D ADDR   00FDH   A   
OCRCL. . . . . . .  D ADDR   00FCH   A   
OCRDH. . . . . . .  D ADDR   00FFH   A   
OCRDL. . . . . . .  D ADDR   00FEH   A   
OV . . . . . . . .  B ADDR   00D0H.2 A   
P. . . . . . . . .  B ADDR   00D0H.0 A   
P0 . . . . . . . .  D ADDR   0080H   A   
P0M1 . . . . . . .  D ADDR   0084H   A   
A51 MACRO ASSEMBLER  PROJECT1                                                             11/05/2016 17:55:35 PAGE    15

P0M2 . . . . . . .  D ADDR   0085H   A   
P1 . . . . . . . .  D ADDR   0090H   A   
P1M1 . . . . . . .  D ADDR   0091H   A   
P1M2 . . . . . . .  D ADDR   0092H   A   
P2 . . . . . . . .  D ADDR   00A0H   A   
P2M1 . . . . . . .  D ADDR   00A4H   A   
P2M2 . . . . . . .  D ADDR   00A5H   A   
P3 . . . . . . . .  D ADDR   00B0H   A   
P3M1 . . . . . . .  D ADDR   00B1H   A   
P3M2 . . . . . . .  D ADDR   00B2H   A   
PB0. . . . . . . .  B ADDR   00B8H.5 A   
PCCU . . . . . . .  B ADDR   00F8H.4 A   
PCL. . . . . . . .  B ADDR   00F8H.2 A   
PCON . . . . . . .  D ADDR   0087H   A   
PCONA. . . . . . .  D ADDR   00B5H   A   
PI2C . . . . . . .  B ADDR   00F8H.0 A   
PIEE . . . . . . .  B ADDR   00F8H.7 A   
PKBI . . . . . . .  B ADDR   00F8H.1 A   
PLLEN. . . . . . .  B ADDR   00C8H.7 A   
PS . . . . . . . .  B ADDR   00B8H.4 A   
PSPI . . . . . . .  B ADDR   00F8H.3 A   
PSR. . . . . . . .  B ADDR   00B8H.4 A   
PST. . . . . . . .  B ADDR   00F8H.6 A   
PSW. . . . . . . .  D ADDR   00D0H   A   
PT0. . . . . . . .  B ADDR   00B8H.1 A   
PT0AD. . . . . . .  D ADDR   00F6H   A   
PT1. . . . . . . .  B ADDR   00B8H.3 A   
PWDRT. . . . . . .  B ADDR   00B8H.6 A   
PX0. . . . . . . .  B ADDR   00B8H.0 A   
PX1. . . . . . . .  B ADDR   00B8H.2 A   
RAND8B . . . . . .  C ADDR   006BH   A   
RANDREG. . . . . .  N NUMB   0020H   A   
RB8. . . . . . . .  B ADDR   0098H.2 A   
REN. . . . . . . .  B ADDR   0098H.4 A   
RI . . . . . . . .  B ADDR   0098H.0 A   
RNG. . . . . . . .  C ADDR   0064H   A   
RS0. . . . . . . .  B ADDR   00D0H.3 A   
RS1. . . . . . . .  B ADDR   00D0H.4 A   
RST. . . . . . . .  B ADDR   0090H.5 A   
RSTSRC . . . . . .  D ADDR   00DFH   A   
RTCCON . . . . . .  D ADDR   00D1H   A   
RTCH . . . . . . .  D ADDR   00D2H   A   
RTCL . . . . . . .  D ADDR   00D3H   A   
RXD. . . . . . . .  B ADDR   0090H.1 A   
S1 . . . . . . . .  C ADDR   0054H   A   
SADDR. . . . . . .  D ADDR   00A9H   A   
SADEN. . . . . . .  D ADDR   00B9H   A   
SBUF . . . . . . .  D ADDR   0099H   A   
SCL. . . . . . . .  B ADDR   0090H.2 A   
SCON . . . . . . .  D ADDR   0098H   A   
SDA. . . . . . . .  B ADDR   0090H.3 A   
SDELAY . . . . . .  C ADDR   005BH   A   
SI . . . . . . . .  B ADDR   00D8H.3 A   
SM0. . . . . . . .  B ADDR   0098H.7 A   
SM1. . . . . . . .  B ADDR   0098H.6 A   
SM2. . . . . . . .  B ADDR   0098H.5 A   
SP . . . . . . . .  D ADDR   0081H   A   
SPCTL. . . . . . .  D ADDR   00E2H   A   
SPDAT. . . . . . .  D ADDR   00E3H   A   
SPICLK . . . . . .  B ADDR   00A0H.5 A   
SPSTAT . . . . . .  D ADDR   00E1H   A   
SS . . . . . . . .  B ADDR   00A0H.4 A   
SSTAT. . . . . . .  D ADDR   00BAH   A   
STA. . . . . . . .  B ADDR   00D8H.5 A   
STO. . . . . . . .  B ADDR   00D8H.4 A   
T0 . . . . . . . .  B ADDR   0090H.2 A   
A51 MACRO ASSEMBLER  PROJECT1                                                             11/05/2016 17:55:35 PAGE    16

T1 . . . . . . . .  B ADDR   0080H.7 A   
TAMOD. . . . . . .  D ADDR   008FH   A   
TB8. . . . . . . .  B ADDR   0098H.3 A   
TCON . . . . . . .  D ADDR   0088H   A   
TCR20. . . . . . .  D ADDR   00C8H   A   
TCR21. . . . . . .  D ADDR   00F9H   A   
TDIR2. . . . . . .  B ADDR   00C8H.2 A   
TF0. . . . . . . .  B ADDR   0088H.5 A   
TF1. . . . . . . .  B ADDR   0088H.7 A   
TH0. . . . . . . .  D ADDR   008CH   A   
TH1. . . . . . . .  D ADDR   008DH   A   
TH2. . . . . . . .  D ADDR   00CDH   A   
TI . . . . . . . .  B ADDR   0098H.1 A   
TICR2. . . . . . .  D ADDR   00C9H   A   
TIFR2. . . . . . .  D ADDR   00E9H   A   
TISE2. . . . . . .  D ADDR   00DEH   A   
TL0. . . . . . . .  D ADDR   008AH   A   
TL1. . . . . . . .  D ADDR   008BH   A   
TL2. . . . . . . .  D ADDR   00CCH   A   
TMOD . . . . . . .  D ADDR   0089H   A   
TMOD20 . . . . . .  B ADDR   00C8H.0 A   
TMOD21 . . . . . .  B ADDR   00C8H.1 A   
TOR2H. . . . . . .  D ADDR   00CFH   A   
TOR2L. . . . . . .  D ADDR   00CEH   A   
TPCR2H . . . . . .  D ADDR   00CBH   A   
TPCR2L . . . . . .  D ADDR   00CAH   A   
TR0. . . . . . . .  B ADDR   0088H.4 A   
TR1. . . . . . . .  B ADDR   0088H.6 A   
TRIM . . . . . . .  D ADDR   0096H   A   
TXD. . . . . . . .  B ADDR   0090H.0 A   
WAIT1. . . . . . .  C ADDR   0025H   A   
WAIT2. . . . . . .  C ADDR   0035H   A   
WDCON. . . . . . .  D ADDR   00A7H   A   
WDL. . . . . . . .  D ADDR   00C1H   A   
WFEED1 . . . . . .  D ADDR   00C2H   A   
WFEED2 . . . . . .  D ADDR   00C3H   A   
WINNER . . . . . .  C ADDR   00E2H   A   
XTAL1. . . . . . .  B ADDR   00B0H.1 A   
XTAL2. . . . . . .  B ADDR   00B0H.0 A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
